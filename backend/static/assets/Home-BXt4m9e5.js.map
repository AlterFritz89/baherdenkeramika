{"version":3,"file":"Home-BXt4m9e5.js","sources":["../../src/views/Home.vue"],"sourcesContent":["<template>\r\n  <div class=\"home-page\">\r\n    <h1>{{ $t('news.title') }}</h1>\r\n    \r\n    <div v-for=\"newsItem in newsItems\" :key=\"newsItem.id\" class=\"news-item\">\r\n      <h2 class=\"news-title\">\r\n        {{ $i18n.locale === 'ru' ? newsItem.title_ru : newsItem.title_tk }}\r\n      </h2>\r\n      \r\n      <img \r\n        v-if=\"newsItem.image\"\r\n        :src=\"getImageUrl(newsItem.image)\"\r\n        class=\"news-image\"\r\n      >\r\n\r\n      <div class=\"news-content\">\r\n        <p class=\"preview-text\">\r\n          {{ newsItem.isExpanded \r\n            ? ($i18n.locale === 'ru' ? newsItem.full_text_ru : newsItem.full_text_tk)\r\n            : ($i18n.locale === 'ru' ? newsItem.preview_ru : newsItem.preview_tk) \r\n          }}\r\n        </p>\r\n        <button \r\n          @click=\"toggleExpand(newsItem)\"\r\n          class=\"read-more-btn\"\r\n        >\r\n          {{ newsItem.isExpanded ? $t('news.close') : $t('news.readMore') }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      newsItems: []\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchNews()\r\n  },\r\n  methods: {\r\n    async fetchNews() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/news/?ordering=-created_at')\r\n        // Добавляем флаг isExpanded к каждой новости\r\n        this.newsItems = response.data.map(item => ({\r\n          ...item,\r\n          isExpanded: false\r\n        }))\r\n      } catch (error) {\r\n        console.error('Ошибка загрузки новостей:', error)\r\n      }\r\n    },\r\n    toggleExpand(newsItem) {\r\n      newsItem.isExpanded = !newsItem.isExpanded\r\n    },\r\n    getImageUrl(imagePath) {\r\n    if (!imagePath) return '';\r\n    // Проверяем, содержит ли путь уже полный URL\r\n    if (imagePath.startsWith('http')) return imagePath;\r\n    // Добавляем базовый URL только если его нет\r\n    return `http://localhost:8000${imagePath}`;\r\n  }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.home-page {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 10px;\r\n}\r\n\r\n.news-item {\r\n  margin-bottom: 40px;\r\n  padding: 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.news-title {\r\n  color: #333;\r\n  margin-bottom: 15px;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.news-image {\r\n  width: 300px;\r\n  height: auto;\r\n  margin-bottom: 15px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.preview-text {\r\n  line-height: 1.6;\r\n  margin-bottom: 15px;\r\n  white-space: pre-line;\r\n  text-align: justify;\r\n}\r\n\r\n.read-more-btn {\r\n  background-color: orange;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.read-more-btn:hover {\r\n  background-color: #e69500;\r\n}\r\n</style>"],"names":["_openBlock","_createElementBlock","_createElementVNode","_Fragment","_renderList","_toDisplayString","_createCommentVNode"],"mappings":";AAoCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAW,CAAC;AAAA,IACd;AAAA,EACD;AAAA,EACD,MAAM,UAAU;AACd,UAAM,KAAK,UAAU;AAAA,EACtB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,YAAY;AAChB,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,IAAI,sDAAsD;AAEvF,aAAK,YAAY,SAAS,KAAK,IAAI,WAAS;AAAA,UAC1C,GAAG;AAAA,UACH,YAAY;AAAA,QACd,EAAE;AAAA,MACF,SAAO,OAAO;AACd,gBAAQ,MAAM,6BAA6B,KAAK;AAAA,MAClD;AAAA,IACD;AAAA,IACD,aAAa,UAAU;AACrB,eAAS,aAAa,CAAC,SAAS;AAAA,IACjC;AAAA,IACD,YAAY,WAAW;AACvB,UAAI,CAAC,UAAW,QAAO;AAEvB,UAAI,UAAU,WAAW,MAAM,EAAG,QAAO;AAEzC,aAAO,wBAAwB,SAAS;AAAA,IAC1C;AAAA,EACA;AACF;AApEO,MAAA,aAAA,EAAA,OAAM,YAAW;AAId,MAAA,aAAA,EAAA,OAAM,aAAY;AAL5B,MAAA,aAAA,CAAA,KAAA;AAeW,MAAA,aAAA,EAAA,OAAM,eAAc;AACpB,MAAA,aAAA,EAAA,OAAM,eAAc;AAhB/B,MAAA,aAAA,CAAA,SAAA;;AACE,SAAAA,UAAA,GAAAC,mBA6BM,OA7BN,YA6BM;AAAA,IA5BJC,gBAA+B,4BAAxB,KAAE,GAAA,YAAA,CAAA,GAAA,CAAA;AAAA,KAETF,UAAA,IAAA,GAAAC,mBAyBME,UA7BV,MAAAC,WAI4B,MAAS,WAJrC,CAIgB,aAAQ;0BAApBH,mBAyBM,OAAA;AAAA,QAzB8B,KAAK,SAAS;AAAA,QAAI,OAAM;AAAA;QAC1DC,gBAEK,MAFL,YACKG,gBAAA,KAAA,MAAM,WAAkB,OAAA,SAAS,WAAW,SAAS,QAAQ,GAAA,CAAA;AAAA,QAI1D,SAAS,sBADjBJ,mBAIC,OAAA;AAAA,UAbP,KAAA;AAAA,UAWS,KAAK,SAAA,YAAY,SAAS,KAAK;AAAA,UAChC,OAAM;AAAA,QAZd,GAAA,MAAA,GAAA,UAAA,KAAAK,mBAAA,IAAA,IAAA;AAAA,QAeMJ,gBAaM,OAbN,YAaM;AAAA,UAZJA,gBAKI,KALJ,YACKG,gBAAA,SAAS,aAA4B,KAAK,MAAC,WAAkB,OAAA,SAAS,eAAe,SAAS,eAA8B,KAAK,MAAC,WAAkB,OAAA,SAAS,aAAa,SAAS,UAAU,GAAA,CAAA;AAAA,UAKlMH,gBAKS,UAAA;AAAA,YAJN,SAAK,YAAE,SAAY,aAAC,QAAQ;AAAA,YAC7B,OAAM;AAAA,UAEH,GAAAG,gBAAA,SAAS,aAAa,KAAE,GAAA,YAAA,IAAiB,QA1BtD,eAAA,CAAA,GAAA,GAAA,UAAA;AAAA;;;;;;"}